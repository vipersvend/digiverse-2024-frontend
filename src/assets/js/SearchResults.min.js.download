!function(e,s){"function"==typeof define&&define.amd?define(["exports"],s):"undefined"!=typeof exports?s(exports):(s(s={}),e.SearchResults=s)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={template:'<div :class="{ \'search-results\': true }" :data-loading="loading" role="dialog" aria-modal="true"> <SearchForm v-model="inputTerm" class="search-results__form" id="search-results-form" :label="strings.label" :submit-label="strings.submit" :clear-label="strings.close" :hide-reset="true" @submit="handleSearch" > <button class="search-form__close" @click="closeForm" type="button"> <span class="screen-reader-text" v-html="strings.close"></span> </button> </SearchForm> <div class="search-results__inner"> <div class="container"> <p v-if="!value" class="search-results__message" v-html="strings.prompt"></p> <p class="search-results__message" ref="resultCount" tabindex="-1" v-else> {{ strings.results }} <span class="search-results__current-term">"{{ value }}"</span> <span class="screen-reader-text">({{ total }} result{{ total === 1 ? \'\' : \'s\' }} found, displaying {{ results.length }})</span> </p> <ul class="search-results__list" v-if="results.length > 0"> <li v-for="result in results" class="search-result click-control-item" :key="result.id" ref="results"> <div class="search-result__body"> <p class="search-result__tags eyebrow" v-if="typeof result.tags !== \'undefined\' && result.tags.length > 0"> {{ result.tags.join(\', \') }} </p> <h4 class="search-result__title"><a :href="result.url" v-html="result.title"></a></h4> <p v-html="result.description" class="search-result__description"></p> <a :href="result.url" class="search-result__link link click-control-element"> {{ result.url }} </a> </div> </li> </ul> <p v-else-if="!loading && value" class="search-results__message search-results__message--error" v-html="strings.noResults"></p> <nav class="search-results__pagination pagination" v-if="hasMore"> <button class="pagination__link pagination__link--next button button--primary" :aria-disabled="loading" @click="setPage(page + 1)" v-html="strings.loadMore"> </button> </nav> </div> </div> </div>',name:"SearchResults",components:{SearchForm:window.SearchForm.default},props:{value:{type:String}},data(){return{perPage:10,inputTerm:this.value,query:{},strings:window.searchStrings,loading:!1,page:1,results:[],previousFocus:null,clearTrap:null,total:0}},watch:{value(e){this.inputTerm!==e&&(this.inputTerm=e),this.getResults(e,1)},getResults(){windows.themeUtility.clickControl()}},computed:{hasMore(){return this.total>this.results.length},totalPages(){return Math.ceil(this.total/this.perPage)}},methods:{handleSearch(){this.getResults(this.inputTerm,1)},topOfResults(){this.$el.scrollTop=0},getResults(e,l=1){if(!this.loading){let s={...this.query},t="/_hcms/search?";s.term=e,s.limit=this.perPage,s.offset=this.perPage*(l-1),Object.keys(s).forEach((e=>{t+=e+"="+s[e]+"&type=SITE_PAGE&type=BLOG_POST&type=LISTING_PAGE&"})),t=t.substring(0,t.length-1),this.loading=!0,this.page=l,this.inputTerm=e,this.$emit("input",e),fetch(t).then((e=>e.json())).then((e=>{this.total=e.total,e=e.results||[];let s=1===l?0:this.results.length;this.results=1===l?e:[...this.results,...e],Vue.nextTick((()=>{(0===s?this.$refs.resultCount:this.$refs.results[s].querySelector("a")).focus()}))})).finally((()=>{this.loading=!1}))}},setPage(e){e=e<this.totalPages?e:this.totalPages,this.getResults(this.value,e)},closeForm(){this.$emit("close")}},mounted(){document.documentElement.classList.add("search-active"),Vue.nextTick((()=>{this.previousFocus=document.activeElement,this.clearTrap=window.themeUtility.trapFocus(this.$el,"#search-results-form")})),this.value&&this.getResults(this.value,1)},destroyed(){document.documentElement.classList.remove("search-active"),this.clearTrap(),this.previousFocus?.focus()}}}));
//# sourceURL=https://cdn2.hubspot.net/hub/74005/hub_generated/template_assets/108283461131/1720545933267/asset-marketplace/brightlane-plus/assets/vue-components/SearchResults.js